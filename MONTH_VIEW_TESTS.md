# Month View Tests

## Unit Tests (`monthView.test.ts`)

### isHoliday
- ✓ Проверка российских праздников 2025 года (моки из markdown-org-extract)
- ✓ Проверка обычных дней
- ✓ Проверка отсутствия расширенных праздников (только официальные даты)

### Calendar Grid Generation
- ✓ Корректное количество ячеек для декабря 2025
- ✓ Определение выходных дней (суббота/воскресенье)

### Task Indicators
- ✓ Маппинг дней с задачами
- ✓ Подсчет задач по категориям (overdue, scheduled_timed, scheduled_no_time, upcoming)

### Date Formatting
- ✓ Форматирование дат в формат YYYY-MM-DD
- ✓ Обработка однозначных месяцев и дней

## Integration Tests (`monthView.integration.test.ts`)

### Rendering
- ✓ Рендеринг month view с календарной сеткой
- ✓ Создание webview панели

### Task Detection
- ✓ Корректное определение дней с задачами
- ✓ Фильтрация пустых дней

### Calendar Logic
- ✓ Расчет первого дня месяца
- ✓ Конвертация дней недели (Sunday=0 → Monday=0)

### Navigation
- ✓ Переход на следующий месяц
- ✓ Переход на предыдущий месяц
- ✓ Обработка перехода через границу года

### Date Consistency
- ✓ Единообразное форматирование дат
- ✓ Корректная обработка граничных случаев

## Запуск тестов

```bash
# Все тесты
npm test

# Только unit тесты
npm run compile && node ./out/test/suite/index.js

# Интеграционные тесты
npm run test:integration
```

## Покрытие

- **Unit тесты**: Логика календаря, праздники (моки), форматирование
- **Integration тесты**: Взаимодействие с VS Code API, рендеринг, навигация

## Тестовые данные

Тесты используют:
- Декабрь 2025 как основной месяц
- Моки праздников из markdown-org-extract (официальные даты 2025 года)
- Задачи с различными типами timestamp

## Источник данных о праздниках

В production коде праздники получаются из `markdown-org-extract --holidays <YEAR>`.
В тестах используются моки с теми же данными для изоляции от внешних зависимостей.

Доступные годы в markdown-org-extract: 2025, 2026 (обновляются по мере необходимости).
